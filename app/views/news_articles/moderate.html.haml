%p
  %span{ :id => 'unmoderated_count' }
    = @new_articles.size
  Unmoderated Articles
  %br
  %span{ :id => 'approved_count' }
    = @approved_articles.size
  = link_to 'Approved Articles', '#approved'
  %br
  %span{ :id => 'rejected_count' }
    = @rejected_articles.size
  = link_to 'Rejected Articles', '#rejected'
%h2 Unmoderated Articles
- @new_articles.each do |n|
  %div{ :id => "article#{n.id}" }
    %h3= n.title
    %p
      #{link_to n.source, n.url} - #{n.pretty_date} - id: #{n.id}
    %p
      %strong Mentions:
    - n.mentions.each do |m|
      %p
        %em= m.politician.name
        \- #{m.summary.html_safe  unless m.summary.blank?}
    = form_for n, :remote => true do |f|
      = f.hidden_field :moderation, :value => 'approved'
      = f.submit 'approve article', :class => 'ajax_button'
    = form_for n, :remote => true do |f|
      = f.hidden_field :moderation, :value => 'rejected'
      = f.submit 'reject article', :class => 'ajax_button'
      = f.text_field :rejection
    %br
    %br

%a{:name => 'approved'}
%h2 Approved Articles
- @approved_articles.each do |n|
  %div{ :id => "article#{n.id}" }
    %h3= n.title
    %p
      #{link_to n.source, n.url} - #{n.pretty_date} - id: #{n.id}
    %p
      %strong Mentions:
    - n.mentions.each do |m|
      %p
        %em= m.politician.name
        \- #{m.summary.html_safe  unless m.summary.blank?}
    = form_for n, :remote => true do |f|
      = f.hidden_field :moderation, :value => 'rejected'
      = f.submit 'reject article', :class => 'ajax_button'
      = f.text_field :rejection
    %br
    %br

%a{:name => 'rejected'}
%h2 Rejected Articles
- @rejected_articles.each do |n|
  %h3= n.title
  %p
    #{link_to n.source, n.url} - #{n.pretty_date}
    = n.rejection.html_safe
  %br

